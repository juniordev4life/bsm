import{s as ye,p as Me,a as de,q as fe,t as _e,i as B,f as he,k as K,u as De,v as we,w as be,x as re,e as Se,y as ve,c as Oe,d as ke,z as xe,j as Ce,l as Ye,A as He}from"../chunks/scheduler.DUxIorIS.js";import{S as Ie,i as Te,b as je,c as ie,a as oe,m as ue,t as R,d as z,e as Ue,f as ce,g as Ne}from"../chunks/index.TZJU1juK.js";import{T as Fe}from"../chunks/Table-with-action-icons.CAR2qCkt.js";import{f as Ve,r as se,d as ae,e as Be,o as Re}from"../chunks/firebase.client.CYkZDNt3.js";import{c as Le,g as Ae,S as W,r as G,F as Ee}from"../chunks/sweetalert2.all.DdojcuO8.js";import{M as We}from"../chunks/seats.DKnIe1vl.js";let Q;const ze=new Uint8Array(16);function Je(){if(!Q&&(Q=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Q))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Q(ze)}const b=[];for(let a=0;a<256;++a)b.push((a+256).toString(16).slice(1));function Ze(a,s=0){return b[a[s+0]]+b[a[s+1]]+b[a[s+2]]+b[a[s+3]]+"-"+b[a[s+4]]+b[a[s+5]]+"-"+b[a[s+6]]+b[a[s+7]]+"-"+b[a[s+8]]+b[a[s+9]]+"-"+b[a[s+10]]+b[a[s+11]]+b[a[s+12]]+b[a[s+13]]+b[a[s+14]]+b[a[s+15]]}const qe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),me={randomUUID:qe};function Pe(a,s,u){if(me.randomUUID&&!s&&!a)return me.randomUUID();a=a||{};const r=a.random||(a.rng||Je)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Ze(r)}var ge={exports:{}};(function(a,s){(function(u,r){a.exports=r()})(Le,function(){var u=1e3,r=6e4,h=36e5,M="millisecond",w="second",k="minute",x="hour",f="day",d="week",p="month",I="quarter",Y="year",T="date",J="Invalid Date",X=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ee=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,te={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(o){var n=["th","st","nd","rd"],e=o%100;return"["+o+(n[(e-20)%10]||n[e]||n[0])+"]"}},L=function(o,n,e){var i=String(o);return!i||i.length>=n?o:""+Array(n+1-i.length).join(e)+o},g={s:L,z:function(o){var n=-o.utcOffset(),e=Math.abs(n),i=Math.floor(e/60),t=e%60;return(n<=0?"+":"-")+L(i,2,"0")+":"+L(t,2,"0")},m:function o(n,e){if(n.date()<e.date())return-o(e,n);var i=12*(e.year()-n.year())+(e.month()-n.month()),t=n.clone().add(i,p),c=e-t<0,l=n.clone().add(i+(c?-1:1),p);return+(-(i+(e-t)/(c?t-l:l-t))||0)},a:function(o){return o<0?Math.ceil(o)||0:Math.floor(o)},p:function(o){return{M:p,y:Y,w:d,d:f,D:T,h:x,m:k,s:w,ms:M,Q:I}[o]||String(o||"").toLowerCase().replace(/s$/,"")},u:function(o){return o===void 0}},v="en",H={};H[v]=te;var F="$isDayjsObject",ne=function(o){return o instanceof q||!(!o||!o[F])},Z=function o(n,e,i){var t;if(!n)return v;if(typeof n=="string"){var c=n.toLowerCase();H[c]&&(t=c),e&&(H[c]=e,t=c);var l=n.split("-");if(!t&&l.length>1)return o(l[0])}else{var $=n.name;H[$]=n,t=$}return!i&&t&&(v=t),t||!i&&v},_=function(o,n){if(ne(o))return o.clone();var e=typeof n=="object"?n:{};return e.date=o,e.args=arguments,new q(e)},m=g;m.l=Z,m.i=ne,m.w=function(o,n){return _(o,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var q=function(){function o(e){this.$L=Z(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[F]=!0}var n=o.prototype;return n.parse=function(e){this.$d=function(i){var t=i.date,c=i.utc;if(t===null)return new Date(NaN);if(m.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var l=t.match(X);if(l){var $=l[2]-1||0,y=(l[7]||"0").substring(0,3);return c?new Date(Date.UTC(l[1],$,l[3]||1,l[4]||0,l[5]||0,l[6]||0,y)):new Date(l[1],$,l[3]||1,l[4]||0,l[5]||0,l[6]||0,y)}}return new Date(t)}(e),this.init()},n.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},n.$utils=function(){return m},n.isValid=function(){return this.$d.toString()!==J},n.isSame=function(e,i){var t=_(e);return this.startOf(i)<=t&&t<=this.endOf(i)},n.isAfter=function(e,i){return _(e)<this.startOf(i)},n.isBefore=function(e,i){return this.endOf(i)<_(e)},n.$g=function(e,i,t){return m.u(e)?this[i]:this.set(t,e)},n.unix=function(){return Math.floor(this.valueOf()/1e3)},n.valueOf=function(){return this.$d.getTime()},n.startOf=function(e,i){var t=this,c=!!m.u(i)||i,l=m.p(e),$=function(N,O){var j=m.w(t.$u?Date.UTC(t.$y,O,N):new Date(t.$y,O,N),t);return c?j:j.endOf(f)},y=function(N,O){return m.w(t.toDate()[N].apply(t.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(O)),t)},D=this.$W,S=this.$M,C=this.$D,V="set"+(this.$u?"UTC":"");switch(l){case Y:return c?$(1,0):$(31,11);case p:return c?$(1,S):$(0,S+1);case d:var U=this.$locale().weekStart||0,A=(D<U?D+7:D)-U;return $(c?C-A:C+(6-A),S);case f:case T:return y(V+"Hours",0);case x:return y(V+"Minutes",1);case k:return y(V+"Seconds",2);case w:return y(V+"Milliseconds",3);default:return this.clone()}},n.endOf=function(e){return this.startOf(e,!1)},n.$set=function(e,i){var t,c=m.p(e),l="set"+(this.$u?"UTC":""),$=(t={},t[f]=l+"Date",t[T]=l+"Date",t[p]=l+"Month",t[Y]=l+"FullYear",t[x]=l+"Hours",t[k]=l+"Minutes",t[w]=l+"Seconds",t[M]=l+"Milliseconds",t)[c],y=c===f?this.$D+(i-this.$W):i;if(c===p||c===Y){var D=this.clone().set(T,1);D.$d[$](y),D.init(),this.$d=D.set(T,Math.min(this.$D,D.daysInMonth())).$d}else $&&this.$d[$](y);return this.init(),this},n.set=function(e,i){return this.clone().$set(e,i)},n.get=function(e){return this[m.p(e)]()},n.add=function(e,i){var t,c=this;e=Number(e);var l=m.p(i),$=function(S){var C=_(c);return m.w(C.date(C.date()+Math.round(S*e)),c)};if(l===p)return this.set(p,this.$M+e);if(l===Y)return this.set(Y,this.$y+e);if(l===f)return $(1);if(l===d)return $(7);var y=(t={},t[k]=r,t[x]=h,t[w]=u,t)[l]||1,D=this.$d.getTime()+e*y;return m.w(D,this)},n.subtract=function(e,i){return this.add(-1*e,i)},n.format=function(e){var i=this,t=this.$locale();if(!this.isValid())return t.invalidDate||J;var c=e||"YYYY-MM-DDTHH:mm:ssZ",l=m.z(this),$=this.$H,y=this.$m,D=this.$M,S=t.weekdays,C=t.months,V=t.meridiem,U=function(O,j,E,P){return O&&(O[j]||O(i,c))||E[j].slice(0,P)},A=function(O){return m.s($%12||12,O,"0")},N=V||function(O,j,E){var P=O<12?"AM":"PM";return E?P.toLowerCase():P};return c.replace(ee,function(O,j){return j||function(E){switch(E){case"YY":return String(i.$y).slice(-2);case"YYYY":return m.s(i.$y,4,"0");case"M":return D+1;case"MM":return m.s(D+1,2,"0");case"MMM":return U(t.monthsShort,D,C,3);case"MMMM":return U(C,D);case"D":return i.$D;case"DD":return m.s(i.$D,2,"0");case"d":return String(i.$W);case"dd":return U(t.weekdaysMin,i.$W,S,2);case"ddd":return U(t.weekdaysShort,i.$W,S,3);case"dddd":return S[i.$W];case"H":return String($);case"HH":return m.s($,2,"0");case"h":return A(1);case"hh":return A(2);case"a":return N($,y,!0);case"A":return N($,y,!1);case"m":return String(y);case"mm":return m.s(y,2,"0");case"s":return String(i.$s);case"ss":return m.s(i.$s,2,"0");case"SSS":return m.s(i.$ms,3,"0");case"Z":return l}return null}(O)||l.replace(":","")})},n.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},n.diff=function(e,i,t){var c,l=this,$=m.p(i),y=_(e),D=(y.utcOffset()-this.utcOffset())*r,S=this-y,C=function(){return m.m(l,y)};switch($){case Y:c=C()/12;break;case p:c=C();break;case I:c=C()/3;break;case d:c=(S-D)/6048e5;break;case f:c=(S-D)/864e5;break;case x:c=S/h;break;case k:c=S/r;break;case w:c=S/u;break;default:c=S}return t?c:m.a(c)},n.daysInMonth=function(){return this.endOf(p).$D},n.$locale=function(){return H[this.$L]},n.locale=function(e,i){if(!e)return this.$L;var t=this.clone(),c=Z(e,i,!0);return c&&(t.$L=c),t},n.clone=function(){return m.w(this.$d,this)},n.toDate=function(){return new Date(this.valueOf())},n.toJSON=function(){return this.isValid()?this.toISOString():null},n.toISOString=function(){return this.$d.toISOString()},n.toString=function(){return this.$d.toUTCString()},o}(),le=q.prototype;return _.prototype=le,[["$ms",M],["$s",w],["$m",k],["$H",x],["$W",f],["$M",p],["$y",Y],["$D",T]].forEach(function(o){le[o[1]]=function(n){return this.$g(n,o[0],o[1])}}),_.extend=function(o,n){return o.$i||(o(n,q,_),o.$i=!0),_},_.locale=Z,_.isDayjs=ne,_.unix=function(o){return _(1e3*o)},_.en=H[v],_.Ls=H,_.p={},_})})(ge);var Ge=ge.exports;const pe=Ae(Ge);function Qe(a){let s,u;return s=new Ee({props:{rentObject:a[3]}}),s.$on("saveRent",a[10]),{c(){ie(s.$$.fragment)},l(r){oe(s.$$.fragment,r)},m(r,h){ue(s,r,h),u=!0},p(r,h){const M={};h&8&&(M.rentObject=r[3]),s.$set(M)},i(r){u||(R(s.$$.fragment,r),u=!0)},o(r){z(s.$$.fragment,r),u=!1},d(r){ce(s,r)}}}function Ke(a){let s,u;return{c(){s=Se("h2"),u=ve(a[2]),this.h()},l(r){s=Oe(r,"H2",{slot:!0});var h=ke(s);u=xe(h,a[2]),h.forEach(B),this.h()},h(){Ce(s,"slot","header")},m(r,h){K(r,s,h),Ye(s,u)},p(r,h){h&4&&He(u,r[2])},d(r){r&&B(s)}}}function $e(a){let s,u;return s=new Fe({props:{columns:a[5],data:a[0],properties:a[6]}}),s.$on("editItem",a[7]),s.$on("deleteItem",a[8]),s.$on("newItem",a[9]),s.$on("sortColumn",a[11]),{c(){ie(s.$$.fragment)},l(r){oe(s.$$.fragment,r)},m(r,h){ue(s,r,h),u=!0},p(r,h){const M={};h&1&&(M.data=r[0]),s.$set(M)},i(r){u||(R(s.$$.fragment,r),u=!0)},o(r){z(s.$$.fragment,r),u=!1},d(r){ce(s,r)}}}function Xe(a){let s,u,r,h,M,w;function k(d){a[12](d)}let x={$$slots:{header:[Ke],default:[Qe]},$$scope:{ctx:a}};a[1]!==void 0&&(x.showModal=a[1]),u=new We({props:x}),Me.push(()=>je(u,"showModal",k));let f=a[4]&&$e(a);return{c(){s=de(),ie(u.$$.fragment),h=de(),f&&f.c(),M=fe(),this.h()},l(d){_e("svelte-1319f0k",document.head).forEach(B),s=he(d),oe(u.$$.fragment,d),h=he(d),f&&f.l(d),M=fe(),this.h()},h(){document.title="Bear Seat Manager - Mieten"},m(d,p){K(d,s,p),ue(u,d,p),K(d,h,p),f&&f.m(d,p),K(d,M,p),w=!0},p(d,[p]){const I={};p&131084&&(I.$$scope={dirty:p,ctx:d}),!r&&p&2&&(r=!0,I.showModal=d[1],De(()=>r=!1)),u.$set(I),d[4]?f?(f.p(d,p),p&16&&R(f,1)):(f=$e(d),f.c(),R(f,1),f.m(M.parentNode,M)):f&&(Ne(),z(f,1,1,()=>{f=null}),Ue())},i(d){w||(R(u.$$.fragment,d),R(f),w=!0)},o(d){z(u.$$.fragment,d),z(f),w=!1},d(d){d&&(B(s),B(h),B(M)),ce(u,d),f&&f.d(d)}}}function et(a,s,u){let r;we(a,G,g=>u(0,r=g));let h=!1,M="",w="endDate",k={created:"",email:"",endDate:"",index:"",name:"",note:"",phone:"",shipping:!1,startDate:"",updated:"",seatName:"",part:{color:"",created:"",index:"",name:"",note:"",productionDate:"",rentstart:"",serialNumber:"",type:"",updated:""}},x=!1,f=["Sitz","Mieter","Email","Startdatum","Enddatum"],d=["seatName","name","email","startDate","endDate"];function p(){const g=se(ae,"rent-baby-seat");Re(g,v=>{const H=v.val();re(G,r=Object.values(H),r),re(G,r=r.map(F=>(F.seatName=F.part.name,F)),r),r.sort(Y).reverse()})}function I(){u(3,k={created:"",email:"",endDate:"",index:"",name:"",note:"",phone:"",shipping:!1,startDate:"",updated:"",seatName:"",part:{color:"",created:"",index:"",name:"",note:"",productionDate:"",rentstart:"",serialNumber:"",type:"",updated:""}})}function Y(g,v){return g[w]<v[w]?-1:g[w]>v[w]?1:0}function T(g){u(3,k=g.detail.item),u(2,M="Miete bearbeiten"),u(1,h=!0)}function J(g){u(3,k=g.detail.item),W.fire({title:"Vermietung löschen?",text:"Möchtest Du die Vermietung wirklich löschen?",icon:"error",allowOutsideClick:!1,showDenyButton:!0,confirmButtonText:"Löschen",denyButtonText:"Nein"}).then(async v=>{v.isConfirmed?(await Ve(se(ae,`rent-baby-seat/${g.detail.item.index}`)),W.fire({text:"Vermietung wurde gelöscht",icon:"success",allowOutsideClick:!1,showConfirmButton:!1,timer:2e3})):v.isDenied&&W.fire({text:"Vermietung wurde nicht gelöscht",icon:"info",allowOutsideClick:!1,showConfirmButton:!1,timer:2e3})})}function X(g){I(),u(2,M="Neue Miete"),u(1,h=!0)}function ee(g){u(1,h=!1),g.detail.item.index===""&&(g.detail.item.index=Pe(),g.detail.item.created=pe().format("DD.MM.YYYY HH:mm:ss")),g.detail.item.updated=pe().format("DD.MM.YYYY HH:mm:ss"),Be(se(ae,`rent-baby-seat/${g.detail.item.index}`),g.detail.item).then(()=>{W.fire({title:"Miete gespeichert",text:"Miete wurde angelegt",icon:"success",allowOutsideClick:!1,showConfirmButton:!1,timer:2e3})}).catch(v=>{W.fire({title:"Miete wurde nicht gespeichert",text:"",icon:"error",allowOutsideClick:!1,showConfirmButton:!1,timer:2e3}),console.log("Save error: "+v)})}function te(g){w=g.detail.property,re(G,r=r.sort(Y).reverse(),r)}be(()=>{p()});function L(g){h=g,u(1,h)}return a.$$.update=()=>{a.$$.dirty&1&&u(4,x=!!r)},[r,h,M,k,x,f,d,T,J,X,ee,te,L]}class ot extends Ie{constructor(s){super(),Te(this,s,et,Xe,ye,{})}}export{ot as component};
